"use strict";var Note,__awaiter=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function s(t){try{p(o.next(t))}catch(t){i(t)}}function r(t){try{p(o.throw(t))}catch(t){i(t)}}function p(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(s,r)}p((o=o.apply(t,e||[])).next())})};!function(t){class e{constructor(t){this._message=t}static init({popupUid:t="popup"+Math.random().toString(16).slice(2),popupFadeInDuration:n=500,popupFadeOutDuration:o=500,popupLiveTime:a=2e3}){e._popupUid=t,e._popupFadeInDuration=n,e._popupFadeOutDuration=o,e._popupLiveTime=a,document.getElementById(e._popupUid)||(document.body.insertAdjacentHTML("beforeend",`<div id="${e._popupUid}" class="popup error"><span></span></div>`),document.getElementById(e._popupUid).addEventListener("click",function(){this.style.display="none"}))}getMessageLang(t=null){return __awaiter(this,void 0,void 0,function*(){let n=new URL("https://translate.yandex.net/api/v1.5/tr.json/detect"),o={key:e._ytkey,text:this._message,hint:"en,ru"};Object.keys(o).forEach(t=>n.searchParams.append(t,o[t]));let a=yield fetch(n.toString()),i=yield a.json();return i.then(t),i.lang||null})}translate(t,n="en",o="",a=this._message){return __awaiter(this,void 0,void 0,function*(){if(o===n)return a;let i=n;o&&(i=o+"-"+n);let s=new URL("https://translate.yandex.net/api/v1.5/tr.json/translate"),r={key:e._ytkey,text:a,lang:i,format:"plain"};Object.keys(r).forEach(t=>s.searchParams.append(t,r[t]));let p=yield fetch(s.toString()),u=yield p.json();return u.then(t),u.text[0]||null})}showNote(t,n=this._message){let o=document.getElementById(e._popupUid);o.classList.remove("error","ok"),o.classList.add(t),o.getElementsByTagName("span")[0].innerText=n;let a=o.parentNode;a.animate({opacity:[0,1]},{duration:e._popupFadeInDuration,endDelay:e._popupLiveTime}),a.animate({opacity:[1,0]},e._popupFadeOutDuration)}showOk(t=this._message){this.showNote("ok",t)}showError(t=this._message){this.showNote("error",t)}static _getCookieLang(){for(let t of document.cookie.split(";")){let n,o,a=t.split("=");if([n,o]=[a[0].trim(),a[1].trim],n===e.COOKIE_LANG_KEY)return o}return null}showTranslateNote(t,n=this._message){let o=navigator.language||e._getCookieLang(),a=this;o?this.translate(function(e){e&&void 0!==e.text&&e.text[0]&&a.showNote(t,e.text[0])},o,"",n):this.showNote(t)}showTranslateOk(t=this._message){this.showTranslateNote("ok",t)}showTranslateError(t=this._message){this.showTranslateNote("error",t)}}e.COOKIE_LANG_KEY="lang",e._ytkey="trnsl.1.1.20180205T094650Z.51484adc0d16f852.ed454d48484c510e9f0150f41067efa0c07b5df0",t.Note=e}(Note||(Note={})),Note.Note.init({}),window.note=new Note.Note;